#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
KRX 백업 데이터 생성 유틸리티
SSL 인증서 문제 발생 시 사용할 수 있는 백업 데이터를 생성합니다.
"""

import pandas as pd
import os
from datetime import datetime

def create_krx_backup():
    """기본적인 KRX 종목 데이터 백업 생성"""
    
    # 주요 종목들의 기본 정보 (예시 데이터)
    backup_data = {
        'Symbol': [
            '005930', '000660', '035420', '005380', '051910', '068270', '035720', '028260',
            '105560', '055550', '096770', '015760', '003670', '012330', '017670', '086790',
            '034730', '009150', '032830', '000270', '033780', '018260', '003550', '011200',
            '051900', '047050', '090430', '326030', '011070', '004020', '010950', '000720',
            '361610', '030200', '009540', '251270', '024110', '010130', '006400', '139480',
            '000810', '282330', '071050', '016360', '011790', '042700', '097950', '267250',
            '000150', '005490', '180640', '003490', '329180', '020150', '004170', '009830'
        ],
        'Name': [
            '삼성전자', 'SK하이닉스', 'NAVER', '현대차', 'LG화학', '셀트리온', '카카오', '삼성물산',
            'KB금융', '신한지주', 'SK이노베이션', '한국전력', 'LG전자', '현대모비스', 'SK텔레콤', '하나금융지주',
            'SK', '삼성SDI', '삼성생명', '기아', 'KT&G', '삼성에스디에스', 'LG', 'HMM',
            'LG생활건강', '포스코홀딩스', '아모레퍼시픽', '롯데케미칼', 'LG이노텍', '현대제철', 'S-Oil', '현대건설',
            '소프트뱅크벤처스', 'KT', 'HD현대중공업', '넷마블', '기업은행', '고려아연', '삼성SDI우', '이마트',
            '삼성화재', 'LG에너지솔루션', '한국금융지주', '삼성증권', 'SKC', '한미반도체', 'CJ제일제당', '엔에이치엔',
            '두산', 'POSCO인터내셔널', '한화솔루션', '대한항공', 'SNT모티브', '롯데쇼핑', '신세계', '대한제강'
        ],
        'Market': ['KOSPI'] * 40 + ['KOSDAQ'] * 16,
        'Sector': [
            '전기전자', '전기전자', 'IT서비스', '자동차', '화학', '제약', 'IT서비스', '건설',
            '금융', '금융', '화학', '전기가스업', '전기전자', '자동차', '통신서비스', '금융',
            '화학', '전기전자', '금융', '자동차', '음식료담배', 'IT서비스', '전기전자', '운수창고업',
            '화학', '철강', '화학', '화학', '전기전자', '철강', '화학', '건설',
            '금융', '통신서비스', '조선', 'IT서비스', '금융', '비철금속', '전기전자', '유통업',
            '금융', '전기전자', '금융', '금융', '화학', '전기전자', '음식료담배', 'IT서비스',
            '기계', '철강', '화학', '운수창고업', '자동차', '유통업', '유통업', '철강'
        ],
        'Industry': [
            '반도체', '반도체', '인터넷', '자동차', '화학', '바이오', '인터넷', '종합상사',
            '은행', '은행', '정유', '전력', '가전', '자동차부품', '통신', '은행',
            '종합화학', '2차전지', '보험', '자동차', '담배', 'IT서비스', '전자', '해운',
            '화장품', '철강', '화장품', '화학', '전자부품', '철강', '정유', '건설',
            '투자', '통신', '조선', '게임', '은행', '비철금속', '2차전지', '유통',
            '보험', '2차전지', '금융지주', '증권', '화학', '반도체', '식품', '게임',
            '중공업', '철강', '태양광', '항공', '자동차부품', '유통', '백화점', '철강'
        ]
    }
    
    # DataFrame 생성
    df = pd.DataFrame(backup_data)
    
    # 백업 파일 저장
    backup_dir = "../data/finance_score"
    os.makedirs(backup_dir, exist_ok=True)
    
    backup_file = os.path.join(backup_dir, "krx_cache.csv")
    df.to_csv(backup_file, index=False, encoding='utf-8-sig')
    
    print(f"KRX 백업 데이터 생성 완료: {backup_file}")
    print(f"총 {len(df)} 종목 데이터 포함")
    print(f"생성 시간: {datetime.now()}")
    
    return backup_file

if __name__ == "__main__":
    create_krx_backup() 